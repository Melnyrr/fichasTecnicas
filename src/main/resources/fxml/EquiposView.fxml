<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.geometry.Insets?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<!-- Contenedor principal que permite intercambiar entre tabla y formulario -->
<VBox fx:id="mainContainer" xmlns="http://javafx.com/javafx/22" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="starter.ui.EquiposController" 
      styleClass="view-container" 
      VBox.vgrow="ALWAYS">
    
    <!-- Contenedor de la tabla (vista original completa) -->
    <VBox fx:id="tableContainer" spacing="15" VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="25" right="25" bottom="20" left="25"/>
        </padding>
        
        <!-- Header Section -->
        <VBox spacing="8" styleClass="header-section">
            <Label text="Gestión de Equipos" styleClass="view-title"/>
            <Label text="Administra el inventario y estado de todos los equipos tecnológicos" styleClass="view-subtitle"/>
        </VBox>
        
        <!-- Action Buttons con iconos y botón de columnas alineado -->
        <HBox spacing="12" styleClass="action-buttons">
            <!-- Botones principales -->
            <Button fx:id="agregarBtn" styleClass="success" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2p-plus" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Agregar nuevo equipo"/>
                </tooltip>
            </Button>
            
            <Button fx:id="editarBtn" styleClass="accent" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2p-pencil" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Editar equipo seleccionado"/>
                </tooltip>
            </Button>
            
            <Button fx:id="eliminarBtn" styleClass="danger" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2d-delete" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Eliminar equipo seleccionado"/>
                </tooltip>
            </Button>
            
            <Button fx:id="verDetalleBtn" styleClass="info" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2e-eye" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Ver detalle del equipo"/>
                </tooltip>
            </Button>
            
            <!-- Separador visual -->
            <Label style="-fx-min-width: 20px;"/>
            
            <!-- Botones adicionales -->
            <Button fx:id="refreshBtn" styleClass="secondary" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2r-refresh" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Actualizar lista"/>
                </tooltip>
            </Button>
            
            <Button fx:id="exportBtn" styleClass="secondary" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2d-download" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Exportar datos"/>
                </tooltip>
            </Button>
            
            <!-- Spacer para empujar el botón de columnas al extremo derecho -->
            <HBox HBox.hgrow="ALWAYS"/>
            
            <!-- Botón de columnas alineado horizontalmente -->
            <Button fx:id="columnToggleBtn" styleClass="secondary, column-toggle-btn" minWidth="50" minHeight="36">
                <graphic>
                    <FontIcon iconLiteral="mdi2t-table-headers-eye" iconSize="16"/>
                </graphic>
                <tooltip>
                    <Tooltip text="Mostrar/Ocultar columnas"/>
                </tooltip>
            </Button>
        </HBox>
        
        <!-- Equipment Table sin header extra -->
        <VBox VBox.vgrow="ALWAYS" spacing="10" styleClass="table-container">        
            <TableView fx:id="equiposTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                <columns>
                    <!-- Columnas principales (siempre visibles) -->
                    <TableColumn fx:id="idColumn" text="ID" prefWidth="50" minWidth="40" maxWidth="60" resizable="false"/>
                    <TableColumn fx:id="tipoEquipoColumn" text="Tipo" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="nombreColumn" text="Nombre" prefWidth="150" minWidth="120"/>
                    <TableColumn fx:id="marcaColumn" text="Marca" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="modeloColumn" text="Modelo" prefWidth="120" minWidth="100"/>
                    
                    <!-- Información de identificación -->
                    <TableColumn fx:id="serialColumn" text="Número de Serie" prefWidth="130" minWidth="110"/>
                    <TableColumn fx:id="codigoInternoColumn" text="Código Interno" prefWidth="110" minWidth="90"/>
                    
                    <!-- Información técnica -->
                    <TableColumn fx:id="interfazColumn" text="Interfaces" prefWidth="120" minWidth="100"/>
                    
                    <!-- Información de ubicación y gestión -->
                    <TableColumn fx:id="ubicacionColumn" text="Ubicación" prefWidth="120" minWidth="100"/>
                    <TableColumn fx:id="proveedorColumn" text="Proveedor" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="fechaColumn" text="Fecha de Compra" prefWidth="120" minWidth="100"/>
                    <TableColumn fx:id="estadoColumn" text="Estado" prefWidth="100" minWidth="80"/>
                    <TableColumn fx:id="referenciaPartesColumn" text="Referencia/Manual" prefWidth="150" minWidth="120"/>
                </columns>
            </TableView>
        </VBox>        
        
        <!-- Status Bar -->
        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="status-bar">
            <FontIcon iconLiteral="mdi2i-information-outline" iconSize="14" styleClass="status-icon"/>
            <Label fx:id="totalEquiposLabel" text="Total de equipos: 0" styleClass="status-text"/>
            <Label fx:id="equiposActivosLabel" text="Activos: 0" styleClass="status-text-secondary"/>
            <Label fx:id="equiposMantenimientoLabel" text="En mantenimiento: 0" styleClass="status-text-warning"/>
                
            <!-- Spacer -->
            <Label style="-fx-min-width: 50px;"/>
                
            <!-- Información adicional con icono -->
            <FontIcon iconLiteral="mdi2g-gesture-swipe-horizontal" iconSize="12" styleClass="status-icon-muted"/>
            <Label fx:id="columnaInfoLabel" text="Usa scroll horizontal para ver todas las columnas" styleClass="status-text-info"/>
        </HBox>
    </VBox>
    
    <!-- El formulario se cargará dinámicamente aquí cuando sea necesario -->
</VBox>